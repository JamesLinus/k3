<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>K3 User Documentation</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book" title="K3 User Documentation"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3"></a>K3 User Documentation</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#d0e9"></a></span></dt><dt><span class="chapter"><a href="#_presentation">1. Presentation</a></span></dt><dd><dl><dt><span class="section"><a href="#_key_features">1.1. Key features</a></span></dt><dd><dl><dt><span class="section"><a href="#_full_java_compatibility">1.1.1. Full java compatibility</a></span></dt><dt><span class="section"><a href="#_open_class_mechanism">1.1.2. Open class mechanism</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#_language_reference">2. Language Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#_basic">2.1. Basic</a></span></dt><dd><dl><dt><span class="section"><a href="#_creating_an_aspect_on_a_class">2.1.1. Creating an aspect on a class</a></span></dt><dt><span class="section"><a href="#_using_aspect_from_another_k3_xtend_program">2.1.2. Using aspect from another k3/xTend program</a></span></dt><dd><dl><dt><span class="section"><a href="#_disambiguisation">2.1.2.1. Disambiguisation</a></span></dt></dl></dd><dt><span class="section"><a href="#_aspect_inheritance_simple_inheritance">2.1.3. Aspect inheritance (simple inheritance)</a></span></dt><dt><span class="section"><a href="#_calling_a_super_operation">2.1.4. Calling a super operation</a></span></dt></dl></dd><dt><span class="section"><a href="#_advanced">2.2. Advanced</a></span></dt><dd><dl><dt><span class="section"><a href="#_extending_an_aspect_multi_inheritance">2.2.1. Extending an aspect (multi inheritance)</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#_ui_user_guide">3. UI User Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#_new_k3_project_wizard">3.1. New K3 project wizard</a></span></dt><dd><dl><dt><span class="section"><a href="#_modeling_options">3.1.1. Modeling options</a></span></dt><dt><span class="section"><a href="#_dependency_management_option">3.1.2. Dependency management option</a></span></dt><dt><span class="section"><a href="#_templates">3.1.3. Templates</a></span></dt></dl></dd><dt><span class="section"><a href="#_new_example_wizard">3.2. New Example wizard</a></span></dt></dl></dd></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#d0e87">Object Oriented visitor versus Aspect Oriented visitor</a></dt><dt>2.1. <a href="#d0e104">Metamodel used as base for the examples)</a></dt></dl></div><div class="preface"><div class="titlepage"><div><div><h2 class="title"><a name="d0e9"></a></h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The latest version of this document is available online from <a class="link" href="http://diverse-project.github.io/k3/" target="_top">http://diverse-project.github.io/k3/</a></p></div></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;Presentation"><div class="titlepage"><div><div><h2 class="title"><a name="_presentation"></a>Chapter&nbsp;1.&nbsp;Presentation</h2></div></div></div><p>K3 is an action language build  on top of the Xtend programming language in order to use it for <span class="strong"><strong>executable metamodeling</strong></span>.</p><p>Its key feature allows
to "re-open" classes of an Ecore metamodel and to weave new features or
operations in these classes.</p><p>The combinaison of K3 and Xtend allows to address a wide range of activities related to model element manipulation. This includes activites such as:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">weaving operational semantics in metamodel definition</li><li class="listitem">defining model to model transformations</li><li class="listitem">defining model to text transformations</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">For an even larger range of activities, K3 is natively used by Melange. Melange allows to build a type system for models and enable scenarios such as:</p><div xmlns="" class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong"><strong>Language extension</strong></span> Using high-level operators (e.g. inheritance, merge), language definitions can be manipulated, extended or restrained to create new DSLs.</li><li class="listitem"><span class="strong"><strong>Model polymorphism</strong></span> Melange&#8217;s type system supports
 model polymorphism and substitutability, and the definition of generic
transformations that can be applied on models originating from different
 DSLs.</li></ul></div></div><p>Technically, K3 consists in a set of active annotations that can be used in
plain Xtend files to express e.g. aspects, pre/post conditions or
invariants, and uses Xbase as the expression language for operations
bodies.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">Actually, many of K3 annotations are not dependent on EMF/ecore and can also work on plain java classe.</p></div><div class="section" title="1.1.&nbsp;Key features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_key_features"></a>1.1.&nbsp;Key features</h2></div></div></div><div class="section" title="1.1.1.&nbsp;Full java compatibility"><div class="titlepage"><div><div><h3 class="title"><a name="_full_java_compatibility"></a>1.1.1.&nbsp;Full java compatibility</h3></div></div></div><p><span class="strong"><strong>Integrating Kermeta and java code has never been that easy !</strong></span></p><p>K3 action language is built as an extension to Xtend that in turn is able to fully reuse existing java bytecode. <span class="strong"><strong>Java code can be used from Xtend/K3 and vice versa</strong></span>.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">Despite that Kermeta was first intended to model manipulation, this java integration means that K3AL can be used for any kind of program.</p></div></div><div class="section" title="1.1.2.&nbsp;Open class mechanism"><div class="titlepage"><div><div><h3 class="title"><a name="_open_class_mechanism"></a>1.1.2.&nbsp;Open class mechanism</h3></div></div></div><p>As all other versions of Kermeta, K3 Action Language leverages the open-class mechanism. It
allows to &#8220;re-open&#8221; existing meta-classes of a metamodel to insert new features such as attributes, references, or operations. <span class="strong"><strong>Please note that return types of aspects methods cannot be inferred: they must be explicitly written!</strong></span></p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> mypackage

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.diverse.k3.al.annotationprocessor.Aspect

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> mypackage.OtherClass
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> mypackage.OtherClassAspect.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=OtherClass)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> OtherClassAspect {
	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">var</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">int</b> foo = <span class="hl-number">1</span>

    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> display (){
         prinln(<i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"I am OtherClassAspect"</i>)
         <i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// The keyword _self must be used to refer to attributes and operations of the class and aspect.</i>
         <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.foo = <span class="hl-number">2</span>
         <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.callingOnOperationOfOtherClass()
    }
}</pre><p>This mechanism serves as the basis for the definition of aspects on metamodels elements, enabling aspect-oriented modeling that helps to model complex software artifacts composed of
intertwined and cross-cutting concerns.</p><p>Typical use of such construct are the Visitor and Interpreter design patterns which are implemented in a more elegant and readable way with Aspect Oriented languages than with with classical Object Oriented languages.</p><div class="figure"><a name="d0e87"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/OOVisitor-vs-AOVisitor.png" width="800" alt="Object Oriented visitor versus Aspect Oriented visitor"></div></div><p class="title"><b>Figure&nbsp;1.1.&nbsp;Object Oriented visitor versus Aspect Oriented visitor</b></p></div><br class="figure-break"></div></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;Language Reference"><div class="titlepage"><div><div><h2 class="title"><a name="_language_reference"></a>Chapter&nbsp;2.&nbsp;Language Reference</h2></div></div></div><div class="section" title="2.1.&nbsp;Basic"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_basic"></a>2.1.&nbsp;Basic</h2></div></div></div><p>To illustrate the use of K3, in the following sections, we will extend a base
java structure. so let&#8217;s consider the following set of classes of a small ecore
representing a Blog.</p><div class="figure"><a name="d0e104"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/blog-base-diagram.png" alt="blog base diagram"></div></div><p class="title"><b>Figure&nbsp;2.1.&nbsp;Metamodel used as base for the examples)</b></p></div><br class="figure-break"><div class="section" title="2.1.1.&nbsp;Creating an aspect on a class"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_an_aspect_on_a_class"></a>2.1.1.&nbsp;Creating an aspect on a class</h3></div></div></div><p>Defining an aspect on a class is done by adding the annotation <span class="emphasis"><em><span class="strong"><strong>Aspect</strong></span></em></span>
on the class corresponding to the aspect. The annotation parameter <span class="strong"><strong>className</strong></span> will indicates which is the base
class that will be augmented.</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> blogsite.aspects

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.diverse.k3.al.annotationprocessor.Aspect <a name="CO1-1"></a><img src="gfx/callouts/1.gif" alt="1" border="0">

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.Blog

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Blog)</b> <a name="CO1-2"></a><img src="gfx/callouts/2.gif" alt="2" border="0">
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> BlogAspect {
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> display (){
         prinln(<i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"I am BlogAspect"</i>)
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>Import the annotation processor for Aspect</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><img src="gfx/callouts/2.gif" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>Add an aspect on top of class Blog</p></td></tr></table></div><p>In an aspect you can use the attributes and operations of both the augmented
class and the aspect itself.</p><p>In aspects <span class="strong"><strong>the keyword</strong></span> "<span class="emphasis"><em><span class="strong"><strong>this</strong></span></em></span>"
<span class="strong"><strong>must not be used</strong></span>. Instead, the
keyword "<span class="strong"><strong>_self</strong></span>" must be used.</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Blog)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> BlogAspect {
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">int</b> blogVersion = <span class="hl-number">1</span> <a name="CO2-1"></a><img src="gfx/callouts/1.gif" alt="1" border="0">

    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> changeTitle (String  newTitle, <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">int</b> newVersion){
         <i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// The keyword _self must be used to refer to attributes and operations of the class and aspect.</i>
         <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.blogVersion = newVersion <a name="CO2-2"></a><img src="gfx/callouts/2.gif" alt="2" border="0">
         <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.title =  newTitle <a name="CO2-3"></a><img src="gfx/callouts/3.gif" alt="3" border="0">
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-1"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>this attrbute exists only in the aspect</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-2"><img src="gfx/callouts/2.gif" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>in aspect, attribute defined on aspect is accessed via <span class="strong"><strong>_self</strong></span></p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-3"><img src="gfx/callouts/3.gif" alt="3" border="0"></a> </p></td><td valign="top" align="left"><p>in aspect, attribute defined on the base class is accessed via <span class="strong"><strong>_self</strong></span></p></td></tr></table></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">Despite it should be legal, due to a bug in xtend, we <span class="strong"><strong>do not</strong></span> recommand the following syntax:</p><pre xmlns="" class="screen">@Aspect(className=typeof(OtherClass))</pre><p xmlns="">It may raise strange scope issue, especially in case of aspects
defined in several packages.</p></div></div><div class="section" title="2.1.2.&nbsp;Using aspect from another k3/xTend program"><div class="titlepage"><div><div><h3 class="title"><a name="_using_aspect_from_another_k3_xtend_program"></a>2.1.2.&nbsp;Using aspect from another k3/xTend program</h3></div></div></div><p>To use the aspect, you need to import the correct classes and indicates to
xTend thant some additionnal features can come from the aspect.</p><p>This is done using the special import <span class="strong"><strong>import
static extension</strong></span> which enable the use of the additions declared
in the aspect.</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> blogsite.demo

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.Blog
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.aspects.BlogAspect

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> blogsite.aspects.BlogAspect.* <a name="CO3-1"></a><img src="gfx/callouts/1.gif" alt="1" border="0">

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> Main {
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> main(){
      <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">val</b> Blog b1 = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">new</b> Blog
      b1.display() <a name="CO3-2"></a><img src="gfx/callouts/2.gif" alt="2" border="0">
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-1"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>This <span class="emphasis"><em>import static extension
&lt;myPkg.AspectName&gt;.*</em></span> allows to make visible the attributes and
operations defined on BlogAspect.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-2"><img src="gfx/callouts/2.gif" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>method display() is visible thanks to the <span class="emphasis"><em>import
static extension BlogAspect.*</em></span></p></td></tr></table></div><div class="section" title="2.1.2.1.&nbsp;Disambiguisation"><div class="titlepage"><div><div><h4 class="title"><a name="_disambiguisation"></a>2.1.2.1.&nbsp;Disambiguisation</h4></div></div></div><p>If several operations or attributes have similar names, xTend may not find the
expected feature. In that case you need to disambiguise the call by accessing
the underlying helper class.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">To have more details about the precise mecanism of this helper class
please refer to the chapter at the end of this document.</p></div><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Blog)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> BlogAspect2 {
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">int</b> title = <span class="hl-number">1</span> <a name="CO4-1"></a><img src="gfx/callouts/1.gif" alt="1" border="0">
}</pre><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> blogsite.aspects.BlogAspect2.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> Main {
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> main(){
      <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">val</b> Blog b1 = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">new</b> Blog
      println( b1.title) <a name="CO4-2"></a><img src="gfx/callouts/1.gif" alt="1" border="0">
      println( BlogAspect2.title(b1) <a name="CO4-3"></a><img src="gfx/callouts/2.gif" alt="2" border="0">
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-1"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>Might be ambiguous because it reuse the name of an attribute on the base class</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-2"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>returns the attribute <code class="literal">title</code> of the base object
b1.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-3"><img src="gfx/callouts/2.gif" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>return the attribute <code class="literal">title</code> of the companion object
for the aspect BlogAspect2.</p></td></tr></table></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">Be careful when cleaning unused imports while your programs isn&#8217;t complete (for example using <span class="strong"><strong>ctrl+shift+o</strong></span>) because it will also removed unused static extension and will disable the code completion (<span class="strong"><strong>ctrl+space</strong></span>) for the features of these aspects.</p></div></div></div><div class="section" title="2.1.3.&nbsp;Aspect inheritance (simple inheritance)"><div class="titlepage"><div><div><h3 class="title"><a name="_aspect_inheritance_simple_inheritance"></a>2.1.3.&nbsp;Aspect inheritance (simple inheritance)</h3></div></div></div><p>An Aspect class can inherit fields and methods from another class. The simple inheritance is acheived using the <span class="strong"><strong><span class="emphasis"><em>extends</em></span></strong></span> keyword from Xtend.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p xmlns="">However, as for Java, an aspect can directly inherit from only one aspect ! For
multiple inheritence, please refer to the advanced section.</p></div><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> blogsite.aspects

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.diverse.k3.al.annotationprocessor.Aspect
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.diverse.k3.al.annotationprocessor.OverrideAspectMethod

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.HasAuthor
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.Post

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> blogsite.HasAuthor.*
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> blogsite.PostAspect.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=HasAuthor)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> HasAuthorAspect {

    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> String display (){
        returns <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.author
    }
}

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Post)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> PostAspect <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extends</b> HasAuthorAspect{ <a name="CO5-1"></a><img src="gfx/callouts/1.gif" alt="1" border="0">

    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@OverrideAspectMethod</b> <a name="CO5-2"></a><img src="gfx/callouts/2.gif" alt="2" border="0">
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> String display (){
        returns <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.title + <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">" by "</i> + <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.author
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-1"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>PostAspect inherits from HasAuthorAspect</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-2"><img src="gfx/callouts/2.gif" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>the <span class="strong"><strong><span class="emphasis"><em>OverrideAspectMethod</em></span></strong></span>
annotionation is required to indicates that the method already exists in the
parent aspect class and must be overriden.</p></td></tr></table></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">Inheritance can also be used to modularize an aspect class even if the base class doesn&#8217;t have a parent. In that case both
Aspect classes should be weaved on the same base class.</p><p xmlns="">For example:</p><pre xmlns="" class="programlisting"><b class="hl-keyword" style="color: darkred">@Aspect(className=HasAuthor)</b>
<b class="hl-keyword" style="color:darkblue">class</b> HasAuthorParentAspect {
    <b class="hl-keyword" style="color:darkblue">def</b> String authorTitle = <i style="color:blue" class="hl-string">"Mr"</i>
}
<b class="hl-keyword" style="color: darkred">@Aspect(className=HasAuthor)</b>
<b class="hl-keyword" style="color:darkblue">class</b> HasAuthorAspect <b class="hl-keyword" style="color:darkblue">extends</b> HasAuthorParentAspect{
    <b class="hl-keyword" style="color:darkblue">def</b> String display (){
        returns <b class="hl-keyword" style="color:darkblue">_self</b>.authorTitle + <i style="color:blue" class="hl-string">" "</i> + <b class="hl-keyword" style="color:darkblue">_self</b>.author
    }
}</pre></div></div><div class="section" title="2.1.4.&nbsp;Calling a super operation"><div class="titlepage"><div><div><h3 class="title"><a name="_calling_a_super_operation"></a>2.1.4.&nbsp;Calling a super operation</h3></div></div></div><p>A call to a super operation can be done by writing <span class="strong"><strong>super_</strong></span> followed by the name of the
operation. Do not forget to use <span class="strong"><strong>_self</strong></span>
to handle elements of the class or aspect.</p><p>The previous example could have been written like this:</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> blogsite.aspects

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.diverse.k3.al.annotationprocessor.Aspect
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.diverse.k3.al.annotationprocessor.OverrideAspectMethod

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.HasAuthor
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> blogsite.Post

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> blogsite.HasAuthor.*
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> blogsite.PostAspect.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Post)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> PostAspect <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extends</b> HasAuthorAspect{

    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@OverrideAspectMethod</b>
    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> String display (){
        returns <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.title + <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">" by "</i> + <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.super_display() <a name="CO6-1"></a><img src="gfx/callouts/1.gif" alt="1" border="0">
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO6-1"><img src="gfx/callouts/1.gif" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>call the parent display() method</p></td></tr></table></div></div></div><div class="section" title="2.2.&nbsp;Advanced"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_advanced"></a>2.2.&nbsp;Advanced</h2></div></div></div><div class="section" title="2.2.1.&nbsp;Extending an aspect (multi inheritance)"><div class="titlepage"><div><div><h3 class="title"><a name="_extending_an_aspect_multi_inheritance"></a>2.2.1.&nbsp;Extending an aspect (multi inheritance)</h3></div></div></div><p>Even if Java allows only one inheritance via <span class="emphasis"><em>extends</em></span>.
When using EMF, it is legal to inherit from several class. The underlying framework will take care to implement a pattern using Interfaces.</p><p>Our aspects must alos be able to deal  with that situation.</p><p>For this K3, offers the ??? annotation</p></div></div></div><div class="chapter" title="Chapter&nbsp;3.&nbsp;UI User Guide"><div class="titlepage"><div><div><h2 class="title"><a name="_ui_user_guide"></a>Chapter&nbsp;3.&nbsp;UI User Guide</h2></div></div></div><p>K3 comes with several wizard and template facilities to help you start your projects.</p><p>This can be either by reproducing one of the featured examples or by using the <span class="emphasis"><em>new K3 project wizard</em></span>.</p><div class="section" title="3.1.&nbsp;New K3 project wizard"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_new_k3_project_wizard"></a>3.1.&nbsp;New K3 project wizard</h2></div></div></div><p>As K3 can be used in several situations, the wizard allows to create project for the various configurations:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Eclipse plugin</li><li class="listitem">Standard java project with embedded libraries (compiled with eclipse)</li><li class="listitem">Maven java project</li></ol></div><p>and using a modeling framework or not.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/new_k3_project_screenshot.png" alt="new k3 project screenshot"></div></div><div class="section" title="3.1.1.&nbsp;Modeling options"><div class="titlepage"><div><div><h3 class="title"><a name="_modeling_options"></a>3.1.1.&nbsp;Modeling options</h3></div></div></div><p>The Modeling environment can also be set to use EMF/Ecore
when checking the <span class="strong"><strong>Use EMF</strong></span> option. In this case it will  add the dependencies to the correct jars dependeing on the dependency management Eclipse plugin with Ecore/EMF.</p></div><div class="section" title="3.1.2.&nbsp;Dependency management option"><div class="titlepage"><div><div><h3 class="title"><a name="_dependency_management_option"></a>3.1.2.&nbsp;Dependency management option</h3></div></div></div><p>When set to <span class="strong"><strong>Plug-in</strong></span> the project uses the Eclipse Plugin nature for defining the dependencies.
So all the K3 jar and xTend jar will be referenced in the <span class="emphasis"><em>manifest.mf</em></span> of the project.</p><p>When set to <span class="strong"><strong>Standalone</strong></span>
In that mode, all the depencies are copied in a lib folder.
This includes K3 jar, but also xTend jar.
It is based on the eclipse standard java compiler for defining dependencies.
This mode can be useful as a base for small project with few dependencies</p><p>When set to <span class="strong"><strong>Maven</strong></span>
In that mode, the project will be a maven project and dependencies will be resolved using maven.</p></div><div class="section" title="3.1.3.&nbsp;Templates"><div class="titlepage"><div><div><h3 class="title"><a name="_templates"></a>3.1.3.&nbsp;Templates</h3></div></div></div><p>when clicking on <span class="emphasis"><em>next</em></span> in the first page your can acces to the <span class="emphasis"><em>templates</em></span></p><div class="informalfigure"><div class="mediaobject"><img src="./images/new_k3_project_templates_screenshot.png" alt="new k3 project templates screenshot"></div></div><p>These templates allows to create typical project structures for various needs.</p><p>One of the most useful is the <span class="emphasis"><em>Use Ecore Basic aspect</em></span> which asks the user for an initial Ecore model (and its project). With this ecore model, it will automatically create an aspect class for each metaclasses in the ecore. It takes care of replicating the inheritance tree in the aspects classes.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">Please note that some templates may require a given dependency management or modeling framework. Those templates will not be available if the options on the first page are not compatible with the template.</p></div></div></div><div class="section" title="3.2.&nbsp;New Example wizard"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_new_example_wizard"></a>3.2.&nbsp;New Example wizard</h2></div></div></div><p>K3 comes with a set of running examples that you can use as a starting point.</p><p>Retreive them from Eclipse: <span class="emphasis"><em>File &gt; New &gt; Example&#8230;&#8203; &gt;</em></span>
then look for the K3 category.</p></div></div></div></body></html>