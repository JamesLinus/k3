<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>K3 User Documentation</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book" title="K3 User Documentation"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3"></a>K3 User Documentation</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#d0e9"></a></span></dt><dt><span class="chapter"><a href="#_presentation">1. Presentation</a></span></dt><dd><dl><dt><span class="section"><a href="#_key_features">1.1. Key features</a></span></dt><dd><dl><dt><span class="section"><a href="#_full_java_compatibility">1.1.1. Full java compatibility</a></span></dt><dt><span class="section"><a href="#_open_class_mechanism">1.1.2. Open class mechanism</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#_ui_user_guide">2. UI user guide</a></span></dt><dd><dl><dt><span class="section"><a href="#_new_k3_project_wizard">2.1. New K3 project wizard</a></span></dt><dd><dl><dt><span class="section"><a href="#_modeling_options">2.1.1. Modeling options</a></span></dt><dt><span class="section"><a href="#_dependency_management_option">2.1.2. Dependency management option</a></span></dt><dt><span class="section"><a href="#_templates">2.1.3. Templates</a></span></dt></dl></dd></dl></dd></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#d0e87">Object Oriented visitor versus Aspect Oriented visitor</a></dt></dl></div><div class="preface"><div class="titlepage"><div><div><h2 class="title"><a name="d0e9"></a></h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The latest version of this document is available online from <a class="link" href="http://diverse-project.github.io/k3/" target="_top">http://diverse-project.github.io/k3/</a></p></div></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;Presentation"><div class="titlepage"><div><div><h2 class="title"><a name="_presentation"></a>Chapter&nbsp;1.&nbsp;Presentation</h2></div></div></div><p>K3 is an action language build  on top of the Xtend programming language in order to use it for <span class="strong"><strong>executable metamodeling</strong></span>.</p><p>Its key feature allows
to "re-open" classes of an Ecore metamodel and to weave new features or
operations in these classes.</p><p>The combinaison of K3 and Xtend allows to address a wide range of activities related to model element manipulation. This includes activites such as:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">weaving operational semantics in metamodel definition</li><li class="listitem">defining model to model transformations</li><li class="listitem">defining model to text transformations</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">For an even larger range of activities, K3 is natively used by Melange. Melange allows to build a type system for models and enable scenarios such as:</p><div xmlns="" class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong"><strong>Language extension</strong></span> Using high-level operators (e.g. inheritance, merge), language definitions can be manipulated, extended or restrained to create new DSLs.</li><li class="listitem"><span class="strong"><strong>Model polymorphism</strong></span> Melange&#8217;s type system supports
 model polymorphism and substitutability, and the definition of generic
transformations that can be applied on models originating from different
 DSLs.</li></ul></div></div><p>Technically, K3 consists in a set of active annotations that can be used in
plain Xtend files to express e.g. aspects, pre/post conditions or
invariants, and uses Xbase as the expression language for operations
bodies.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">Actually, many of K3 annotations are not dependent on EMF/ecore and can also work on plain java classe.</p></div><div class="section" title="1.1.&nbsp;Key features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_key_features"></a>1.1.&nbsp;Key features</h2></div></div></div><div class="section" title="1.1.1.&nbsp;Full java compatibility"><div class="titlepage"><div><div><h3 class="title"><a name="_full_java_compatibility"></a>1.1.1.&nbsp;Full java compatibility</h3></div></div></div><p><span class="strong"><strong>Integrating Kermeta and java code has never been that easy !</strong></span></p><p>K3 action language is built as an extension to Xtend that in turn is able to fully reuse existing java bytecode. <span class="strong"><strong>Java code can be used from Xtend/K3 and vice versa</strong></span>.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">Despite that Kermeta was first intended to model manipulation, this java integration means that K3AL can be used for any kind of program.</p></div></div><div class="section" title="1.1.2.&nbsp;Open class mechanism"><div class="titlepage"><div><div><h3 class="title"><a name="_open_class_mechanism"></a>1.1.2.&nbsp;Open class mechanism</h3></div></div></div><p>As all other versions of Kermeta, K3 Action Language leverages the open-class mechanism. It
allows to &#8220;re-open&#8221; existing meta-classes of a metamodel to insert new features such as attributes, references, or operations. <span class="strong"><strong>Please note that return types of aspects methods cannot be inferred: they must be explicitly written!</strong></span></p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> mypackage

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> fr.inria.triskell.k3.Aspect

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> mypackage.OtherClass
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> mypackage.OtherClassAspect.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=OtherClass)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> OtherClassAspect {
	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">var</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">int</b> foo = <span class="hl-number">1</span>

    <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> display (){
         prinln(<i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"I am OtherClassAspect"</i>)
         <i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// The keyword _self must be used to refer to attributes and operations of the class and aspect.</i>
         <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.foo = <span class="hl-number">2</span>
         <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.callingOnOperationOfOtherClass()
    }
}</pre><p>This mechanism serves as the basis for the definition of aspects on metamodels elements, enabling aspect-oriented modeling that helps to model complex software artifacts composed of
intertwined and cross-cutting concerns.</p><p>Typical use of such construct are the Visitor and Interpreter design patterns which are implemented in a more elegant and readable way with Aspect Oriented languages than with with classical Object Oriented languages.</p><div class="figure"><a name="d0e87"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/OOVisitor-vs-AOVisitor.png" width="800" alt="Object Oriented visitor versus Aspect Oriented visitor"></div></div><p class="title"><b>Figure&nbsp;1.1.&nbsp;Object Oriented visitor versus Aspect Oriented visitor</b></p></div><br class="figure-break"></div></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;UI user guide"><div class="titlepage"><div><div><h2 class="title"><a name="_ui_user_guide"></a>Chapter&nbsp;2.&nbsp;UI user guide</h2></div></div></div><p>K3 comes with several wizard and template facilities to help you start your projects.</p><p>This can be either by reproducing one of the featured examples or by using the <span class="emphasis"><em>new K3 project wizard</em></span>.</p><div class="section" title="2.1.&nbsp;New K3 project wizard"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_new_k3_project_wizard"></a>2.1.&nbsp;New K3 project wizard</h2></div></div></div><p>As K3 can be used in several situations, the wizard allows to create project for the various configurations:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Eclipse plugin</li><li class="listitem">Standard java project with embedded libraries (compiled with eclipse)</li><li class="listitem">Maven java project</li></ol></div><p>and using a modeling framework or not.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/new_k3_project_screenshot.png" alt="new k3 project screenshot"></div></div><div class="section" title="2.1.1.&nbsp;Modeling options"><div class="titlepage"><div><div><h3 class="title"><a name="_modeling_options"></a>2.1.1.&nbsp;Modeling options</h3></div></div></div><p>The Modeling environment can also be set to use EMF/Ecore
when checking the <span class="strong"><strong>Use EMF</strong></span> option. In this case it will  add the dependencies to the correct jars dependeing on the dependency management Eclipse plugin with Ecore/EMF.</p></div><div class="section" title="2.1.2.&nbsp;Dependency management option"><div class="titlepage"><div><div><h3 class="title"><a name="_dependency_management_option"></a>2.1.2.&nbsp;Dependency management option</h3></div></div></div><p>When set to <span class="strong"><strong>Plug-in</strong></span> the project uses the Eclipse Plugin nature for defining the dependencies.
So all the K3 jar and xTend jar will be referenced in the <span class="emphasis"><em>manifest.mf</em></span> of the project.</p><p>When set to <span class="strong"><strong>Standalone</strong></span>
In that mode, all the depencies are copied in a lib folder.
This includes K3 jar, but also xTend jar.
It is based on the eclipse standard java compiler for defining dependencies.
This mode can be useful as a base for small project with few dependencies</p><p>When set to <span class="strong"><strong>Maven</strong></span>
In that mode, the project will be a maven project and dependencies will be resolved using maven.</p></div><div class="section" title="2.1.3.&nbsp;Templates"><div class="titlepage"><div><div><h3 class="title"><a name="_templates"></a>2.1.3.&nbsp;Templates</h3></div></div></div><p>when clicking on <span class="emphasis"><em>next</em></span> in the first page your can acces to the <span class="emphasis"><em>templates</em></span></p><div class="informalfigure"><div class="mediaobject"><img src="./images/new_k3_project_templates_screenshot.png" alt="new k3 project templates screenshot"></div></div><p>These templates allows to create typical project structures for various needs.</p><p>One of the most useful is the <span class="emphasis"><em>Use Ecore Basic aspect</em></span> which ask the user for an initial Ecore model (and its project). With this ecore model, it will automatically create an aspect class for each metaclasses in the ecore. It takes care of replicating the inheritance tree in the aspects classes.</p><div class="informalexample"><p>Please note that some templates may require a given dependency management or modeling framework. Those templates will not be available if the options on the first page are not compatible with the template.</p></div></div></div></div></div></body></html>